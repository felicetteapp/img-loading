(()=>{"use strict";var t={955:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ImgLoading=void 0;const s=e(432);i.ImgLoading=class{constructor(){this.elements=[],this.items=[],this.imagesContainer=null,this.prefix="il",this.intersectionObserver=null,console.log("ImgLoading")}withPrefix(t){return`${this.prefix}-${t}`}getElements(t){return"string"==typeof t?document.querySelectorAll(t):t instanceof HTMLElement||t instanceof Element?document.querySelectorAll(t.tagName):t instanceof NodeList?t:t instanceof HTMLCollection?document.querySelectorAll(Array.from(t).map((t=>t.tagName)).join(",")):Array.isArray(t)?document.querySelectorAll(t.map((t=>t.tagName)).join(",")):t instanceof Object&&"length"in t?document.querySelectorAll(Array.from(t).map((t=>t.tagName)).join(",")):document.querySelectorAll("")}getHtmlElementFromNode(t){this.elements=Array.from(t)}getItemsFromElements(){this.items=this.elements.map((t=>s.ImgLoadingItem.fromNode(t,this))).filter(Boolean)}init(t,i={}){console.log("init",t,i);const e=Object.assign({prefix:"il"},i);this.prefix=e.prefix,this.imagesContainer=e.container||null,this.imagesContainer&&(this.intersectionObserver=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const i=this.items.find((i=>i.node===t.target));i&&(i.isImgLoaded&&i.isThumbnailLoaded||i.load())}}),{root:this.imagesContainer})}))),this.getHtmlElementFromNode(this.getElements(t)),this.getItemsFromElements()}}},432:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ImgLoadingItem=void 0;class e{get isThumbnailLoaded(){return this.thumbnailLoaded}get isImgLoaded(){return this.imgLoaded}get isThumbnailLoading(){return this.thumbnailLoading}get isImgLoading(){return this.imgLoading}constructor({fullsize:t,thumbnail:i,onLoaded:e,onError:s,parent:r,imgWidth:a,imgHeight:o,node:n,aspectRatio:h,mainColor:l}){this.imgEl=new Image,this.thumbnailEl=new Image,this.thumbnail="",this.loaded=!1,this.error=!1,this.imgWidth=0,this.imgHeight=0,this.mainColor="",this.aspectRatio="1/1",this.thumbnailLoaded=!1,this.imgLoaded=!1,this.thumbnailLoading=!1,this.imgLoading=!1,this.fullsize=t,this.thumbnail=i,this.onLoaded=e,this.onError=s,this.parent=r,this.imgWidth=a,this.imgHeight=o,this.node=n,this.aspectRatio=h||"1/1",this.mainColor=l||"",this.imgEl=new Image,this.thumbnailEl=new Image,this.thumbnailEl.width=this.imgWidth,this.thumbnailEl.height=this.imgHeight,this.imgEl.width=this.imgWidth,this.imgEl.height=this.imgHeight,this.node.style.setProperty(`--${this.parent.withPrefix("main-color")}`,this.mainColor),this.node.style.setProperty(`--${this.parent.withPrefix("aspect-ratio")}`,this.aspectRatio),this.addClass("thumbnail",this.thumbnailEl),this.addClass("img",this.imgEl),this.addClass("item"),this.addClass("item--initialized"),this.imgEl.onload=()=>{var t;this.addClass("item--img-loaded"),this.removeClass("item--img-loading"),this.imgLoaded=!0,null===(t=this.onLoaded)||void 0===t||t.call(this,this)},this.imgEl.onerror=()=>{var t;this.addClass("item--img-error"),this.removeClass("item--img-loading"),this.error=!0,null===(t=this.onError)||void 0===t||t.call(this,this)},this.thumbnailEl.onload=()=>{this.addClass("item--thumbnail-loaded"),this.removeClass("item--thumbnail-loading"),this.addClass("item--img-loading"),this.thumbnailLoaded=!0,this.imgEl.src=this.fullsize},this.parent.intersectionObserver?this.parent.intersectionObserver.observe(this.node):this.load()}withPrefix(t){return this.parent.withPrefix(t)}addClasses(t,i=this.node){t.forEach((t=>{i.classList.add(this.withPrefix(t))}))}removeClasses(t,i=this.node){t.forEach((t=>{i.classList.remove(this.withPrefix(t))}))}addClass(t,i=this.node){this.addClasses([t],i)}removeClass(t,i=this.node){this.removeClasses([t],i)}load(){this.addClass("item--thumbnail-loading"),this.thumbnailEl.src=this.thumbnail,this.node.appendChild(this.imgEl),this.node.appendChild(this.thumbnailEl),this.parent.intersectionObserver.unobserve(this.node)}destroy(){this.parent.intersectionObserver&&this.parent.intersectionObserver.unobserve(this.node),this.node.remove()}static elementHasCorrectData(t,i){const s=e.propsToCheck.every((e=>t.hasAttribute(i(e))));if(!s){const s=e.propsToCheck.filter((e=>!t.hasAttribute(i(e)))).map((t=>i(t)));console.error(`Element is missing the following attributes: ${s.join(", ")}`,t)}return s}static extractDataFromAttributes(t,i){return e.elementHasCorrectData(t,i)?{thumbnail:t.getAttribute(i("thumbnail")),fullsize:t.getAttribute(i("fullsize")),imgWidth:parseFloat(t.getAttribute(i("width"))),imgHeight:parseFloat(t.getAttribute(i("height"))),aspectRatio:t.getAttribute(i("aspect-ratio"))||"1/1",mainColor:t.getAttribute(i("main-color"))||""}:null}static fromNode(t,i){const s=e.extractDataFromAttributes(t,i.withPrefix.bind(i));return s?new e(Object.assign(Object.assign({},s),{parent:i,node:t})):null}}i.ImgLoadingItem=e,e.propsToCheck=["thumbnail","fullsize"]}},i={};function e(s){var r=i[s];if(void 0!==r)return r.exports;var a=i[s]={exports:{}};return t[s](a,a.exports,e),a.exports}var s={};(()=>{var t=s;Object.defineProperty(t,"__esModule",{value:!0}),t.ImgLoading=void 0;var i=e(955);Object.defineProperty(t,"ImgLoading",{enumerable:!0,get:function(){return i.ImgLoading}})})(),window.ImgLoadingLibrary=s})();